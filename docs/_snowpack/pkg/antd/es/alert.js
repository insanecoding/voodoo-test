import {
  _ as _inherits,
  a as _createSuper,
  b as _classCallCheck,
  c as _createClass,
  d as _slicedToArray,
  C as ConfigContext,
  e as classnames,
  f as _defineProperty,
  g as _extends,
  r as replaceElement,
} from '../../common/reactNode-2dfb2fa1.js';
import { r as react } from '../../common/index-57a74e37.js';
import {
  C as CloseOutlined,
  a as CloseCircleFilled,
} from '../../common/CloseCircleFilled-0ba6a98c.js';
import { I as Icon, C as CSSMotion } from '../../common/CSSMotion-9e0d6b93.js';
import '../../common/_commonjsHelpers-8c19dec8.js';
import '../../common/index-8dbeb7e4.js';

// This icon file is generated automatically.
var CheckCircleOutlined = {
  icon: {
    tag: 'svg',
    attrs: { viewBox: '64 64 896 896', focusable: 'false' },
    children: [
      {
        tag: 'path',
        attrs: {
          d:
            'M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z',
        },
      },
      {
        tag: 'path',
        attrs: {
          d:
            'M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z',
        },
      },
    ],
  },
  name: 'check-circle',
  theme: 'outlined',
};

// GENERATE BY ./scripts/generate.ts

var CheckCircleOutlined$1 = function CheckCircleOutlined$1(props, ref) {
  return /*#__PURE__*/ react.createElement(
    Icon,
    Object.assign({}, props, {
      ref: ref,
      icon: CheckCircleOutlined,
    }),
  );
};

CheckCircleOutlined$1.displayName = 'CheckCircleOutlined';
var CheckCircleOutlined$2 = /*#__PURE__*/ react.forwardRef(
  CheckCircleOutlined$1,
);

// This icon file is generated automatically.
var ExclamationCircleOutlined = {
  icon: {
    tag: 'svg',
    attrs: { viewBox: '64 64 896 896', focusable: 'false' },
    children: [
      {
        tag: 'path',
        attrs: {
          d:
            'M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z',
        },
      },
      {
        tag: 'path',
        attrs: {
          d:
            'M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z',
        },
      },
    ],
  },
  name: 'exclamation-circle',
  theme: 'outlined',
};

// GENERATE BY ./scripts/generate.ts

var ExclamationCircleOutlined$1 = function ExclamationCircleOutlined$1(
  props,
  ref,
) {
  return /*#__PURE__*/ react.createElement(
    Icon,
    Object.assign({}, props, {
      ref: ref,
      icon: ExclamationCircleOutlined,
    }),
  );
};

ExclamationCircleOutlined$1.displayName = 'ExclamationCircleOutlined';
var ExclamationCircleOutlined$2 = /*#__PURE__*/ react.forwardRef(
  ExclamationCircleOutlined$1,
);

// This icon file is generated automatically.
var InfoCircleOutlined = {
  icon: {
    tag: 'svg',
    attrs: { viewBox: '64 64 896 896', focusable: 'false' },
    children: [
      {
        tag: 'path',
        attrs: {
          d:
            'M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z',
        },
      },
      {
        tag: 'path',
        attrs: {
          d:
            'M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z',
        },
      },
    ],
  },
  name: 'info-circle',
  theme: 'outlined',
};

// GENERATE BY ./scripts/generate.ts

var InfoCircleOutlined$1 = function InfoCircleOutlined$1(props, ref) {
  return /*#__PURE__*/ react.createElement(
    Icon,
    Object.assign({}, props, {
      ref: ref,
      icon: InfoCircleOutlined,
    }),
  );
};

InfoCircleOutlined$1.displayName = 'InfoCircleOutlined';
var InfoCircleOutlined$2 = /*#__PURE__*/ react.forwardRef(InfoCircleOutlined$1);

// This icon file is generated automatically.
var CloseCircleOutlined = {
  icon: {
    tag: 'svg',
    attrs: { viewBox: '64 64 896 896', focusable: 'false' },
    children: [
      {
        tag: 'path',
        attrs: {
          d:
            'M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z',
        },
      },
      {
        tag: 'path',
        attrs: {
          d:
            'M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z',
        },
      },
    ],
  },
  name: 'close-circle',
  theme: 'outlined',
};

// GENERATE BY ./scripts/generate.ts

var CloseCircleOutlined$1 = function CloseCircleOutlined$1(props, ref) {
  return /*#__PURE__*/ react.createElement(
    Icon,
    Object.assign({}, props, {
      ref: ref,
      icon: CloseCircleOutlined,
    }),
  );
};

CloseCircleOutlined$1.displayName = 'CloseCircleOutlined';
var CloseCircleOutlined$2 = /*#__PURE__*/ react.forwardRef(
  CloseCircleOutlined$1,
);

// This icon file is generated automatically.
var CheckCircleFilled = {
  icon: {
    tag: 'svg',
    attrs: { viewBox: '64 64 896 896', focusable: 'false' },
    children: [
      {
        tag: 'path',
        attrs: {
          d:
            'M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z',
        },
      },
    ],
  },
  name: 'check-circle',
  theme: 'filled',
};

// GENERATE BY ./scripts/generate.ts

var CheckCircleFilled$1 = function CheckCircleFilled$1(props, ref) {
  return /*#__PURE__*/ react.createElement(
    Icon,
    Object.assign({}, props, {
      ref: ref,
      icon: CheckCircleFilled,
    }),
  );
};

CheckCircleFilled$1.displayName = 'CheckCircleFilled';
var CheckCircleFilled$2 = /*#__PURE__*/ react.forwardRef(CheckCircleFilled$1);

// This icon file is generated automatically.
var ExclamationCircleFilled = {
  icon: {
    tag: 'svg',
    attrs: { viewBox: '64 64 896 896', focusable: 'false' },
    children: [
      {
        tag: 'path',
        attrs: {
          d:
            'M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z',
        },
      },
    ],
  },
  name: 'exclamation-circle',
  theme: 'filled',
};

// GENERATE BY ./scripts/generate.ts

var ExclamationCircleFilled$1 = function ExclamationCircleFilled$1(props, ref) {
  return /*#__PURE__*/ react.createElement(
    Icon,
    Object.assign({}, props, {
      ref: ref,
      icon: ExclamationCircleFilled,
    }),
  );
};

ExclamationCircleFilled$1.displayName = 'ExclamationCircleFilled';
var ExclamationCircleFilled$2 = /*#__PURE__*/ react.forwardRef(
  ExclamationCircleFilled$1,
);

// This icon file is generated automatically.
var InfoCircleFilled = {
  icon: {
    tag: 'svg',
    attrs: { viewBox: '64 64 896 896', focusable: 'false' },
    children: [
      {
        tag: 'path',
        attrs: {
          d:
            'M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z',
        },
      },
    ],
  },
  name: 'info-circle',
  theme: 'filled',
};

// GENERATE BY ./scripts/generate.ts

var InfoCircleFilled$1 = function InfoCircleFilled$1(props, ref) {
  return /*#__PURE__*/ react.createElement(
    Icon,
    Object.assign({}, props, {
      ref: ref,
      icon: InfoCircleFilled,
    }),
  );
};

InfoCircleFilled$1.displayName = 'InfoCircleFilled';
var InfoCircleFilled$2 = /*#__PURE__*/ react.forwardRef(InfoCircleFilled$1);

function getDataOrAriaProps(props) {
  return Object.keys(props).reduce(function (prev, key) {
    if (
      (key.substr(0, 5) === 'data-' ||
        key.substr(0, 5) === 'aria-' ||
        key === 'role') &&
      key.substr(0, 7) !== 'data-__'
    ) {
      prev[key] = props[key];
    }

    return prev;
  }, {});
}

var ErrorBoundary = /*#__PURE__*/ (function (_React$Component) {
  _inherits(ErrorBoundary, _React$Component);

  var _super = _createSuper(ErrorBoundary);

  function ErrorBoundary() {
    var _this;

    _classCallCheck(this, ErrorBoundary);

    _this = _super.apply(this, arguments);
    _this.state = {
      error: undefined,
      info: {
        componentStack: '',
      },
    };
    return _this;
  }

  _createClass(ErrorBoundary, [
    {
      key: 'componentDidCatch',
      value: function componentDidCatch(error, info) {
        this.setState({
          error: error,
          info: info,
        });
      },
    },
    {
      key: 'render',
      value: function render() {
        var _this$props = this.props,
          message = _this$props.message,
          description = _this$props.description,
          children = _this$props.children;
        var _this$state = this.state,
          error = _this$state.error,
          info = _this$state.info;
        var componentStack =
          info && info.componentStack ? info.componentStack : null;
        var errorMessage =
          typeof message === 'undefined' ? (error || '').toString() : message;
        var errorDescription =
          typeof description === 'undefined' ? componentStack : description;

        if (error) {
          return /*#__PURE__*/ react.createElement(Alert, {
            type: 'error',
            message: errorMessage,
            description: /*#__PURE__*/ react.createElement(
              'pre',
              null,
              errorDescription,
            ),
          });
        }

        return children;
      },
    },
  ]);

  return ErrorBoundary;
})(react.Component);

var __rest =
  (undefined && undefined.__rest) ||
  function (s, e) {
    var t = {};

    for (var p in s) {
      if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    }

    if (s != null && typeof Object.getOwnPropertySymbols === 'function')
      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
        if (
          e.indexOf(p[i]) < 0 &&
          Object.prototype.propertyIsEnumerable.call(s, p[i])
        )
          t[p[i]] = s[p[i]];
      }
    return t;
  };
var iconMapFilled = {
  success: CheckCircleFilled$2,
  info: InfoCircleFilled$2,
  error: CloseCircleFilled,
  warning: ExclamationCircleFilled$2,
};
var iconMapOutlined = {
  success: CheckCircleOutlined$2,
  info: InfoCircleOutlined$2,
  error: CloseCircleOutlined$2,
  warning: ExclamationCircleOutlined$2,
};

var Alert = function Alert(_a) {
  var _classNames2;

  var description = _a.description,
    customizePrefixCls = _a.prefixCls,
    message = _a.message,
    banner = _a.banner,
    _a$className = _a.className,
    className = _a$className === void 0 ? '' : _a$className,
    style = _a.style,
    onMouseEnter = _a.onMouseEnter,
    onMouseLeave = _a.onMouseLeave,
    onClick = _a.onClick,
    afterClose = _a.afterClose,
    showIcon = _a.showIcon,
    closable = _a.closable,
    closeText = _a.closeText,
    action = _a.action,
    props = __rest(_a, [
      'description',
      'prefixCls',
      'message',
      'banner',
      'className',
      'style',
      'onMouseEnter',
      'onMouseLeave',
      'onClick',
      'afterClose',
      'showIcon',
      'closable',
      'closeText',
      'action',
    ]);

  var _React$useState = react.useState(false),
    _React$useState2 = _slicedToArray(_React$useState, 2),
    closed = _React$useState2[0],
    setClosed = _React$useState2[1];

  var ref = react.useRef();

  var _React$useContext = react.useContext(ConfigContext),
    getPrefixCls = _React$useContext.getPrefixCls,
    direction = _React$useContext.direction;

  var prefixCls = getPrefixCls('alert', customizePrefixCls);

  var handleClose = function handleClose(e) {
    var _a;

    setClosed(true);
    (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props, e);
  };

  var getType = function getType() {
    var type = props.type;

    if (type !== undefined) {
      return type;
    } // banner 模式默认为警告

    return banner ? 'warning' : 'info';
  }; // closeable when closeText is assigned

  var isClosable = closeText ? true : closable;
  var type = getType();

  var renderIconNode = function renderIconNode() {
    var icon = props.icon; // use outline icon in alert with description

    var iconType =
      (description ? iconMapOutlined : iconMapFilled)[type] || null;

    if (icon) {
      return replaceElement(
        icon,
        /*#__PURE__*/ react.createElement(
          'span',
          {
            className: ''.concat(prefixCls, '-icon'),
          },
          icon,
        ),
        function () {
          return {
            className: classnames(
              ''.concat(prefixCls, '-icon'),
              _defineProperty({}, icon.props.className, icon.props.className),
            ),
          };
        },
      );
    }

    return /*#__PURE__*/ react.createElement(iconType, {
      className: ''.concat(prefixCls, '-icon'),
    });
  };

  var renderCloseIcon = function renderCloseIcon() {
    return isClosable
      ? /*#__PURE__*/ react.createElement(
          'button',
          {
            type: 'button',
            onClick: handleClose,
            className: ''.concat(prefixCls, '-close-icon'),
            tabIndex: 0,
          },
          closeText
            ? /*#__PURE__*/ react.createElement(
                'span',
                {
                  className: ''.concat(prefixCls, '-close-text'),
                },
                closeText,
              )
            : /*#__PURE__*/ react.createElement(CloseOutlined, null),
        )
      : null;
  }; // banner 模式默认有 Icon

  var isShowIcon = banner && showIcon === undefined ? true : showIcon;
  var alertCls = classnames(
    prefixCls,
    ''.concat(prefixCls, '-').concat(type),
    ((_classNames2 = {}),
    _defineProperty(
      _classNames2,
      ''.concat(prefixCls, '-with-description'),
      !!description,
    ),
    _defineProperty(
      _classNames2,
      ''.concat(prefixCls, '-no-icon'),
      !isShowIcon,
    ),
    _defineProperty(_classNames2, ''.concat(prefixCls, '-banner'), !!banner),
    _defineProperty(
      _classNames2,
      ''.concat(prefixCls, '-rtl'),
      direction === 'rtl',
    ),
    _classNames2),
    className,
  );
  var dataOrAriaProps = getDataOrAriaProps(props);
  return /*#__PURE__*/ react.createElement(
    CSSMotion,
    {
      visible: !closed,
      motionName: ''.concat(prefixCls, '-motion'),
      motionAppear: false,
      motionEnter: false,
      onLeaveStart: function onLeaveStart(node) {
        return {
          maxHeight: node.offsetHeight,
        };
      },
      onLeaveEnd: afterClose,
    },
    function (_ref) {
      var motionClassName = _ref.className,
        motionStyle = _ref.style;
      return /*#__PURE__*/ react.createElement(
        'div',
        _extends(
          {
            ref: ref,
            'data-show': !closed,
            className: classnames(alertCls, motionClassName),
            style: _extends(_extends({}, style), motionStyle),
            onMouseEnter: onMouseEnter,
            onMouseLeave: onMouseLeave,
            onClick: onClick,
            role: 'alert',
          },
          dataOrAriaProps,
        ),
        isShowIcon ? renderIconNode() : null,
        /*#__PURE__*/ react.createElement(
          'div',
          {
            className: ''.concat(prefixCls, '-content'),
          },
          /*#__PURE__*/ react.createElement(
            'div',
            {
              className: ''.concat(prefixCls, '-message'),
            },
            message,
          ),
          /*#__PURE__*/ react.createElement(
            'div',
            {
              className: ''.concat(prefixCls, '-description'),
            },
            description,
          ),
        ),
        action
          ? /*#__PURE__*/ react.createElement(
              'div',
              {
                className: ''.concat(prefixCls, '-action'),
              },
              action,
            )
          : null,
        renderCloseIcon(),
      );
    },
  );
};

Alert.ErrorBoundary = ErrorBoundary;

export default Alert;
